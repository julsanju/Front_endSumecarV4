<div style="height: 100vh !important; "
  class="relative overflow-x-auto shadow-md sm:rounded-lg space-table space-table ">
  @if(isLoading){
  <section class="bg-white dark:bg-gray-900">
    <div class="container px-6 py-10 mx-auto animate-pulse">
      <h1 class="w-48 h-2 mx-auto bg-gray-200 rounded-lg dark:bg-gray-700"></h1>

      <p class="w-64 h-2 mx-auto mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"></p>
      <p class="w-64 h-2 mx-auto mt-4 bg-gray-200 rounded-lg sm:w-80 dark:bg-gray-700"></p>

      <div class="grid grid-cols-1 gap-8 mt-8 xl:mt-12 xl:gap-12 sm:grid-cols-2 lg:grid-cols-3">
        <div class="w-full ">
          <div class="w-full h-64 bg-gray-300 rounded-lg md:h-72 dark:bg-gray-600"></div>

          <h1 class="w-56 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"></h1>
          <p class="w-24 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"></p>
        </div>

        <div class="w-full ">
          <div class="w-full h-64 bg-gray-300 rounded-lg md:h-72 dark:bg-gray-600"></div>

          <h1 class="w-56 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"></h1>
          <p class="w-24 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"></p>
        </div>

        <div class="w-full ">
          <div class="w-full h-64 bg-gray-300 rounded-lg md:h-72 dark:bg-gray-600"></div>

          <h1 class="w-56 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"></h1>
          <p class="w-24 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"></p>
        </div>
      </div>
    </div>
  </section>
  }
  @if(!isLoading){
  @if(errorOccurred){
  <div class="flex flex-col items-center justify-center text-center">
    <img [src]="errorImageURL" alt="Error" class="mb-5 max-w-full h-auto mx-auto" />

  </div>
  <div class="text-center">

    <h1
      class="mb-3 text-2xl font-bold leading-tight text-gray-900 sm:text-4xl lg:text-5xl dark:text-white text-center mx-auto">
      ¡Uy! Algo salió mal.
    </h1>
    <p class="mb-5 text-base font-normal text-gray-500 md:text-lg dark:text-gray-400 text-center">No hay pedidos
      confirmados asociados a esta
      cuenta
    </p>
  </div>
  }
  @if(!errorOccurred){
  <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
    <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
      <tr>
        <th scope="col" class="px-6 py-3"></th>
        <th scope="col" class="px-6 py-3"> # ORDEN </th>
        <th scope="col" class="px-6 py-3"> FECHA </th>
        <th scope="col" class="px-6 py-3"> HORA </th>
        <th scope="col" class="px-6 py-3"> CLIENTE </th>
        <th scope="col" class="px-6 py-3"> TELEFONO </th>
        <th scope="col" class="px-6 py-3"> #ITEMS </th>
        @if (esAdmin() || esEmpleado()) {
        <th scope="col" class="px-6 py-3">
          <span class="sr-only">Finalizar</span>
        </th>
        }
      </tr>
    </thead>
    <tbody>
      @for (row of getPaginatedData(); track row) {
      <ng-container>
        <tr (click)="abrirCerrarAccordeon(row.numero_orden)"
          class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-all duration-6000 ease-out">
          <svg data-accordion-icon class="w-3 h-3 transform transition-transform ml-5"
            [ngClass]="{'rotate-180': accordeon[row.numero_orden], 'transition-transform duration-400 ease-in-out': true}"
            aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 5 5 1 1 5" />
          </svg>

          <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">{{ row.numero_orden }}</td>
          <td class="px-6 py-4">{{ row.fecha | date:'dd/MM/yyyy'}}</td>
          <td class="px-6 py-4">{{ row.fecha | date:'HH:mm:ss a'}}</td>
          <td class="px-6 py-4">{{ row.cliente }}</td>
          <td class="px-6 py-4">{{ row.telefono }}</td>
          <td class="px-6 py-4">{{ row.cantidad_items }}</td>
          @if (esAdmin() || esEmpleado()) {
          <td class="px-6 py-4 text-right">
            <button type="button" class="focus:outline-none text-white bg-green-700
                      hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-small
                      rounded-lg text-xs px-5 py-2.5 me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700
                    dark:focus:ring-green-800" (click)="finalizarPeticionProducto(row.numero_orden)">Finalizar</button>
          </td>
          }
        </tr>
        <!-- Mostrar detalles solo si están presentes -->
        <!-- <tr *ngIf="row.detalle && row.detalle.length > 0"> -->
        @if(accordeon[row.numero_orden]){
        <tr>
          <td [attr.colspan]="(esAdmin() || esEmpleado()) ? 7 : 6">
            <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
              <thead class="w-full text-xs text-white uppercase bg-gray-400 dark:bg-gray-700 dark:text-gray-400">
                <tr class="w-full">
                  <th scope="col" class="px-4 py-2 w-full">Código</th>
                  <th scope="col" class="px-4 py-2 w-full">Artículo</th>
                  <th scope="col" class="px-4 py-2 w-full">Laboratorio</th>
                  <th scope="col" class="px-4 py-2 w-full">Cantidad</th>
                  <!-- Agrega más columnas según sea necesario -->
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let detalle of row.detalle"
                  class="w-full bg-gray-100 border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-all duration-6000 ease-out">
                  <td class="border px-4 py-2 w-full">{{ detalle.codigo }}</td>
                  <td class="border px-4 py-2 w-full">{{ detalle.articulo }}</td>
                  <td class="border px-4 py-2 w-full">{{ detalle.laboratorio }}</td>
                  <td class="border px-4 py-2 w-full">{{ detalle.cantidad }}</td>
                  <!-- Agrega más columnas según sea necesario -->
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        }
      </ng-container>


      <!-- <ng-container>
      <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
        <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">{{ row.numero_orden }}</td>
        <td class="px-6 py-4">{{ row.fecha | date:'dd/MM/yyyy'}}</td>
        <td class="px-6 py-4">{{ row.fecha | date:'HH:mm:ss a'}}</td>
        <td class="px-6 py-4">{{ row.cliente }}</td>
        <td class="px-6 py-4">{{ row.telefono }}</td>
        @if (esAdmin() || esEmpleado()) {
        <td class="px-6 py-4 text-right">
          <button type="button" class="focus:outline-none text-white bg-green-700
                hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-small
                rounded-lg text-xs px-5 py-2.5 me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700
              dark:focus:ring-green-800" (click)="finalizarPeticionProducto(row.numero_orden)">Finalizar</button>
        </td>
        }
      </tr>
      <tr>
        <td colspan="5">
          <div>
            <p>Código: {{ row.codigo }}</p>
            <p>Artículo: {{ row.articulo }}</p>
            <p>Laboratorio: {{ row.laboratorio }}</p>
            <p>Cantidad: {{ row.cantidad }}</p>
            <!-- Otros detalles según tus necesidades -->
      <!-- </div>
        </td>
      </tr>
    </ng-container> -->
      }
    </tbody>
  </table>
  <div class="flex items-center justify-between mt-4">
    <div class="flex-1 flex justify-between sm:hidden">
      <a href="#" (click)="onPageChange(currentPage - 1)"
        class="relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 dark:text-gray-400 dark:border-gray-700 rounded-md dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700">
        Anterior
      </a>
      <a href="#" (click)="onPageChange(currentPage + 1)"
        class="relative inline-flex items-center px-4 py-2 ml-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 dark:text-gray-400 dark:border-gray-700 rounded-md dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700">
        Siguiente
      </a>
    </div>
    <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
      <div>
        <p class="text-sm text-gray-700 dark:text-gray-400">
          Mostrando
          <span class="font-medium">{{ (currentPage - 1) * pageSize + 1 }}</span>
          a
          <span class="font-medium">{{ getEndIndex() }}</span>
          de
          <span class="font-medium">{{ data.length }}</span>
          resultados
        </p>
      </div>
      <div>
        <nav class="relative z-0 inline-flex -space-x-px" aria-label="Pagination">
          <a (click)="onPageChange(currentPage + 1)"
            class="relative inline-flex items-center px-2 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 dark:text-gray-400 dark:border-gray-700 rounded-l-md dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700">
            <span class="sr-only">Anterior</span>
            <!-- Heroicon name: solid/chevron-left -->
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
              aria-hidden="true">
              <path fill-rule="evenodd"
                d="M6.707 3.293a1 1 0 0 1 1.414 0l6 6a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414L11.586 11H3a1 1 0 1 1 0-2h8.586L6.707 4.707a1 1 0 0 1 0-1.414z"
                clip-rule="evenodd" />
            </svg>
          </a>
          <!-- Add pagination links here -->
          <!-- ... -->
          <a (click)="onPageChange(currentPage - 1)"
            class="relative inline-flex items-center px-2 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 dark:text-gray-400 dark:border-gray-700 rounded-r-md dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700">
            <span class="sr-only">Siguiente</span>
            <!-- Heroicon name: solid/chevron-right -->
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
              aria-hidden="true">
              <path fill-rule="evenodd"
                d="M13.293 16.707a1 1 0 0 1-1.414 0l-6-6a1 1 0 0 1 0-1.414l6-6a1 1 0 0 1 1.414 1.414L8.414 9H17a1 1 0 1 1 0 2h-8.586l4.293 4.293a1 1 0 0 1 0 1.414z"
                clip-rule="evenodd" />
            </svg>
          </a>
        </nav>
      </div>
    </div>
  </div>
  }
  }
</div>